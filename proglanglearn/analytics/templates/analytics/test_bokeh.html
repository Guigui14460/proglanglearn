{% extends 'analytics/base_analytic.html' %}
{% load static i18n js %}

{% block title %}{% trans "Tableau de bord" %} - {% endblock title %}

{% block extra_head %}
<link href="http://cdn.pydata.org/bokeh/release/bokeh-1.3.4.min.css" rel="stylesheet" type="text/css">
<link href="http://cdn.pydata.org/bokeh/release/bokeh-widgets-1.3.4.min.css" rel="stylesheet" type="text/css">
<script src="http://cdn.pydata.org/bokeh/release/bokeh-1.3.4.min.js"></script>
<script src="http://cdn.pydata.org/bokeh/release/bokeh-widgets-1.3.4.min.js"></script>
{{ bokeh_script|safe }}
<style>
.dashboard-grid {display: grid; grid-gap: 10px; grid-template-columns: 1fr 1fr;}
@media screen and (max-width: 1050px){.dashboard-grid{grid-template-columns: 1fr;}}
</style>
{% endblock extra_head %}

{% block main %}
<h1 class="large">{% trans "Tableau de bord" %}</h1>
<div class="dashboard-grid">
    <div class="card card-hoverable">
        <div class="card-container">
            <h3 class="card-title center-text mb-1">{% trans "Progression" %}</h3>
            <div class="card-content">
                <div class="piechart-container">
                    <div class="box">
                        <div class="chart" data-percent="{{ level_percent }}">{{ level_experience }}</div>
                        <h2>{% trans "Niveau" %} {{ level }} : {{ request.user.profile.get_user_profile_type }}</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card card-hoverable">
        <div class="card-container">
            <h3 class="card-title center-text">{% trans "Signalements" %}</h3>
            <div class="card-content m-1 mt-2">
                {{ strike|safe }}
            </div>
        </div>
    </div>
</div>
<div class="card card-hoverable my-1">
    <div class="card-container">
        <h3 class="card-title center-text">{% trans "Expérience gagnée cette dernière semaine" %}</h3>
        <div class="card-content">
            {{ bokeh_div|safe }}
        </div>
    </div>
</div>
{% endblock main %}

{% block javascript %}
<script src="{% static 'js/jquery.easypiechart.min.js' %}"></script>
{% endblock javascript %}

{% block jquery %}
$('.chart').easyPieChart({
    easing: 'easeOutBounce',
    barColor: "#1780e8",
    lineWidth: 12,
    size: 160,
    scaleColor: false,
    trackColor: '#a0a0a0',
    lineCap: 'circle',
    animate: 1150,
});
{% endblock jquery %}